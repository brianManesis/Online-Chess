{"ast":null,"code":"var _jsxFileName = \"/home/brian/Desktop/Projects/Chess/frontend/src/components/chess/game/board/Chessboard.tsx\",\n  _s = $RefreshSig$();\nimport './Chessboard.css';\nimport Square from './Square';\nimport { ChessBoardModel } from '../../../../model/ChessBoardModel';\nimport { useRef, useState } from 'react';\nimport { BOARD_SIZE } from '../../../../Constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chessboard(props) {\n  _s();\n  const playerColor = props.playerColor;\n  const boardViewRef = useRef(null);\n  const [activePiece, setActivePiece] = useState(null);\n  const [grabPiecePos, setGrabPiecePos] = useState(null);\n  const boardModel = new ChessBoardModel(playerColor).genChessBoard();\n  const boardView = [[], [], [], [], [], [], [], []];\n  for (let i = 0; i < BOARD_SIZE; i++) {\n    for (let j = 0; j < BOARD_SIZE; j++) {\n      boardView[i].push( /*#__PURE__*/_jsxDEV(Square, {\n        squareModel: boardModel[i][j]\n      }, i + \"\" + j, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this));\n    }\n  }\n  function handleClick(event) {\n    if (activePiece) {\n      movePiece(event);\n    } else {\n      selectPiece(event);\n    }\n  }\n  function selectPiece(event) {\n    var _element$parentElemen, _element$parentElemen2;\n    const element = event.target;\n    const currentBoard = boardViewRef.current;\n    setGrabPiecePos(((_element$parentElemen = element.parentElement) === null || _element$parentElemen === void 0 ? void 0 : _element$parentElemen.id) + \"\");\n    console.log((_element$parentElemen2 = element.parentElement) === null || _element$parentElemen2 === void 0 ? void 0 : _element$parentElemen2.id);\n    if (element.classList.contains(\"piece\") && currentBoard) {\n      setActivePiece(element);\n    }\n  }\n  function movePiece(event) {\n    const element = event.target;\n    console.log(element);\n    if (activePiece && boardViewRef.current) {\n      let startSquare = activePiece.parentElement;\n      let endSquare = element;\n      let endSquarePiece = endSquare.children;\n      if (endSquarePiece.length > 0 && endSquarePiece) {\n        endSquare.removeChild(endSquare.children[0]);\n      }\n      if (element.classList.contains(\"piece\")) {\n        endSquare = endSquare.parentElement;\n      }\n      if (startSquare && endSquare) {\n        startSquare.removeChild(activePiece);\n        endSquare.appendChild(activePiece);\n      }\n      setActivePiece(null);\n    }\n  }\n  // function grabPiece(event: React.MouseEvent){\n  //     const element = event.target as HTMLElement;\n  //     const currentBoard = boardViewRef.current;\n  //     setGrabPiecePos(element.parentElement?.id+\"\");\n  //     console.log(element.parentElement?.id);\n  //     if(element.classList.contains(\"piece\") && currentBoard){\n  //         const BOARD_VIEW_HEIGHT = boardViewRef.current.clientHeight;\n  //         const BOARD_VIEW_WIDTH = boardViewRef.current.clientWidth;\n  //         const x = event.clientX-(BOARD_VIEW_WIDTH/16);\n  //         const y = event.clientY-(BOARD_VIEW_HEIGHT/16);\n  //         element.style.position = \"absolute\";\n  //         element.style.left = `${x}px`;\n  //         element.style.top = `${y}px`;\n  //         setActivePiece(element);\n  //     }\n  // }\n\n  // function movePiece(event: React.MouseEvent){\n  //     if(activePiece && boardViewRef.current){\n  //         const BOARD_VIEW_HEIGHT = boardViewRef.current.clientHeight;\n  //         const BOARD_VIEW_WIDTH = boardViewRef.current.clientHeight;\n  //         const minX = boardViewRef.current.offsetLeft;\n  //         const minY = boardViewRef.current.offsetTop;\n  //         const maxX = boardViewRef.current.offsetLeft + ((8/9)*BOARD_VIEW_WIDTH);\n  //         const maxY = boardViewRef.current.offsetTop + ((8/9)*BOARD_VIEW_HEIGHT);\n\n  //         const x = event.clientX-(BOARD_VIEW_WIDTH/16);\n  //         const y = event.clientY-(BOARD_VIEW_HEIGHT/16);\n\n  //         if (x < minX) {\n  //             activePiece.style.left = `${minX}px`;\n  //         }\n  //         else if (x > maxX) {\n  //             activePiece.style.left = `${maxX}px`;\n  //         }\n  //         else {\n  //             activePiece.style.left = `${x}px`;\n  //         }\n\n  //         if (y < minY) {\n  //             activePiece.style.top = `${minY}px`;\n  //         }\n  //         else if (y > maxY) {\n  //             activePiece.style.top = `${maxY}px`;\n  //         }\n  //         else {\n  //             activePiece.style.top = `${y}px`;\n  //         }\n  //     }\n  // }\n\n  // function dropPiece(event: React.MouseEvent){\n  //     const element = event.target as HTMLElement;\n  //     console.log(event);\n  //     if(activePiece && boardViewRef.current){\n  //         setActivePiece(null);\n  //     }\n  // }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"chessboard\",\n    onClick: event => handleClick(event),\n    ref: boardViewRef,\n    children: boardView\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n}\n_s(Chessboard, \"bcMENRtHT3nIWkSYW+d4LtPqixM=\");\n_c = Chessboard;\nvar _c;\n$RefreshReg$(_c, \"Chessboard\");","map":{"version":3,"names":["Square","ChessBoardModel","useRef","useState","BOARD_SIZE","jsxDEV","_jsxDEV","Chessboard","props","_s","playerColor","boardViewRef","activePiece","setActivePiece","grabPiecePos","setGrabPiecePos","boardModel","genChessBoard","boardView","i","j","push","squareModel","fileName","_jsxFileName","lineNumber","columnNumber","handleClick","event","movePiece","selectPiece","_element$parentElemen","_element$parentElemen2","element","target","currentBoard","current","parentElement","id","console","log","classList","contains","startSquare","endSquare","endSquarePiece","children","length","removeChild","appendChild","onClick","ref","_c","$RefreshReg$"],"sources":["/home/brian/Desktop/Projects/Chess/frontend/src/components/chess/game/board/Chessboard.tsx"],"sourcesContent":["import './Chessboard.css';\nimport Square from './Square';\nimport { ChessBoardModel } from '../../../../model/ChessBoardModel';\nimport { useEffect, useRef, useState } from 'react';\nimport { BOARD_SIZE } from '../../../../Constants';\n\nexport default function Chessboard(props:{playerColor:string}){\n    const playerColor = props.playerColor;\n    const boardViewRef = useRef<HTMLDivElement>(null);\n    const [activePiece, setActivePiece] = useState< HTMLElement | null>(null);\n    const [grabPiecePos, setGrabPiecePos] = useState<string | null>(null)\n    const boardModel = new ChessBoardModel(playerColor).genChessBoard();\n    const boardView:any = [[],[],[],[],[],[],[],[]];\n\n    for(let i = 0; i<BOARD_SIZE; i++){\n        for(let j = 0; j<BOARD_SIZE; j++){\n            boardView[i].push(\n                <Square key={i+\"\"+j} squareModel={boardModel[i][j]}></Square>\n            );\n        }\n    }\n    function handleClick(event: React.MouseEvent){\n        if(activePiece){\n            movePiece(event);\n        }\n        else{\n            selectPiece(event);\n        }\n    }\n    function selectPiece(event: React.MouseEvent){\n        const element = event.target as HTMLElement;\n        const currentBoard = boardViewRef.current;\n        setGrabPiecePos(element.parentElement?.id+\"\");\n        console.log(element.parentElement?.id);\n        if(element.classList.contains(\"piece\") && currentBoard){\n            \n            setActivePiece(element); \n        }       \n    }\n    function movePiece(event: React.MouseEvent){\n        const element = event.target as HTMLElement;\n        console.log(element);\n        if(activePiece && boardViewRef.current){\n            let startSquare = activePiece.parentElement;\n            let endSquare: HTMLElement | null = element;\n            let endSquarePiece = endSquare.children;\n            if(endSquarePiece.length > 0 && endSquarePiece){\n                endSquare.removeChild(endSquare.children[0]);\n            }\n            if(element.classList.contains(\"piece\")){\n                endSquare = endSquare.parentElement;\n            }\n            if(startSquare && endSquare){\n                startSquare.removeChild(activePiece);\n                endSquare.appendChild(activePiece);\n            }\n            setActivePiece(null);\n        }\n    }\n    // function grabPiece(event: React.MouseEvent){\n    //     const element = event.target as HTMLElement;\n    //     const currentBoard = boardViewRef.current;\n    //     setGrabPiecePos(element.parentElement?.id+\"\");\n    //     console.log(element.parentElement?.id);\n    //     if(element.classList.contains(\"piece\") && currentBoard){\n    //         const BOARD_VIEW_HEIGHT = boardViewRef.current.clientHeight;\n    //         const BOARD_VIEW_WIDTH = boardViewRef.current.clientWidth;\n    //         const x = event.clientX-(BOARD_VIEW_WIDTH/16);\n    //         const y = event.clientY-(BOARD_VIEW_HEIGHT/16);\n    //         element.style.position = \"absolute\";\n    //         element.style.left = `${x}px`;\n    //         element.style.top = `${y}px`;\n    //         setActivePiece(element);\n    //     }\n    // }\n    \n    // function movePiece(event: React.MouseEvent){\n    //     if(activePiece && boardViewRef.current){\n    //         const BOARD_VIEW_HEIGHT = boardViewRef.current.clientHeight;\n    //         const BOARD_VIEW_WIDTH = boardViewRef.current.clientHeight;\n    //         const minX = boardViewRef.current.offsetLeft;\n    //         const minY = boardViewRef.current.offsetTop;\n    //         const maxX = boardViewRef.current.offsetLeft + ((8/9)*BOARD_VIEW_WIDTH);\n    //         const maxY = boardViewRef.current.offsetTop + ((8/9)*BOARD_VIEW_HEIGHT);\n\n    //         const x = event.clientX-(BOARD_VIEW_WIDTH/16);\n    //         const y = event.clientY-(BOARD_VIEW_HEIGHT/16);\n\n    //         if (x < minX) {\n    //             activePiece.style.left = `${minX}px`;\n    //         }\n    //         else if (x > maxX) {\n    //             activePiece.style.left = `${maxX}px`;\n    //         }\n    //         else {\n    //             activePiece.style.left = `${x}px`;\n    //         }\n    \n    //         if (y < minY) {\n    //             activePiece.style.top = `${minY}px`;\n    //         }\n    //         else if (y > maxY) {\n    //             activePiece.style.top = `${maxY}px`;\n    //         }\n    //         else {\n    //             activePiece.style.top = `${y}px`;\n    //         }\n    //     }\n    // }\n    \n    // function dropPiece(event: React.MouseEvent){\n    //     const element = event.target as HTMLElement;\n    //     console.log(event);\n    //     if(activePiece && boardViewRef.current){\n    //         setActivePiece(null);\n    //     }\n    // }\n    return(\n        <div id = \"chessboard\"\n        onClick={event=>handleClick(event)}\n        ref={boardViewRef}>\n            {boardView}\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}